<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Add Product</title>
<style>
body{
  margin:0;
  background:#F4AAAE;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  font-family:sans-serif;
}
.phone{
  width:360px;
  height:640px;
  background:#fff;
  border-radius:16px;
  padding:24px 16px;
  box-sizing:border-box;
  position:relative;
}
.input{
  width:100%;
  padding:14px;
  border-radius:24px;
  border:none;
  background:#EEE9F0;
  margin-bottom:16px;
  text-align:center;
}
.upload-box{
  width:100%;
  height:160px;
  background:#F3F3F3;
  border-radius:16px;
  display:flex;
  justify-content:center;
  align-items:center;
  cursor:pointer;
  overflow:hidden;
}
.upload-box img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
}
.btn{
  margin-top:16px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:24px;
  background:#000;
  color:#fff;
  cursor:pointer;
}
.home{
  position:absolute;
  bottom:16px;
  left:50%;
  transform:translateX(-50%);
  font-size:22px;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="phone">

<input id="link" class="input" placeholder="‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)">

<label class="upload-box">
  <span id="text">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ</span>
  <img id="preview">
  <input type="file" id="file" accept="image/*" hidden>
</label>

<button class="btn" onclick="upload()">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
<div class="home" onclick="location.href='index.html'">üè†</div>

</div>

<script>
const fileInput = document.getElementById("file");
const preview = document.getElementById("preview");
const text = document.getElementById("text");

fileInput.addEventListener("change", ()=>{
  const f = fileInput.files[0];
  if(!f) return;
  const r = new FileReader();
  r.onload = ()=>{
    preview.src = r.result;
    preview.style.display="block";
    text.style.display="none";
  };
  r.readAsDataURL(f);
});

async function upload(){
  const file = fileInput.files[0];
  if(!file){
    alert("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô");
    return;
  }

  const base64 = await new Promise(res=>{
    const r = new FileReader();
    r.onload = ()=>res(r.result);
    r.readAsDataURL(file);
  });

  await fetch("https://script.google.com/macros/library/d/16ypspCQu-hTUW8W_6MahSd8qsQ5lTgIkLaJ2v6scN4eXkXvSikGVmef9/5",{
    method:"POST",
    body: JSON.stringify({
      image: base64,
      filename: file.name,
      type: file.type
    })
  });

  alert("‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏Ç‡πâ‡∏≤ Google Drive ‡πÅ‡∏•‡πâ‡∏ß");
}
</script>
</body>
</html>
