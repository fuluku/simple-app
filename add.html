<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>เพิ่มสินค้า</title>
</head>
<body>

  <h2>เพิ่มสินค้า</h2>

  <input
    type="text"
    id="link"
    placeholder="วางลิงก์สินค้า"
    style="width: 100%; margin-bottom: 10px;"
  />

  <input
    type="file"
    id="image"
    accept="image/*"
  />

  <br><br>

  <button onclick="sendData()">เพิ่ม</button>

  <script>
    function sendData() {
      const link = document.getElementById('link').value;
      const file = document.getElementById('image').files[0];

      if (!link || !file) {
        alert('กรอกลิงก์และเลือกรูป');
        return;
      }

      const reader = new FileReader();
      reader.onload = function () {
        fetch('https://endoparasitic-convalescently-cristen.ngrok-free.dev/webhook-test/add-product', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            link: link,
            image_base64: reader.result
          })
        })
        .then(() => alert('ส่งแล้ว'))
        .catch(err => alert('ส่งไม่สำเร็จ'));
      };

      reader.readAsDataURL(file);
    }
  </script>

</body>
</html>
